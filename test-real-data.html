<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>×‘×“×™×§×ª × ×ª×•× ×™× ×××™×ª×™×™×</title>
</head>
<body>
    <h1>×‘×“×™×§×ª × ×ª×•× ×™× ×××™×ª×™×™× ×-Firebase</h1>
    <div id="results"></div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    
    <script>
        const db = firebase.firestore();
        const results = document.getElementById('results');
        
        async function checkData() {
            results.innerHTML = '<h2>ğŸ” ×‘×•×“×§ × ×ª×•× ×™×...</h2>';
            
            // 1. ×‘×“×•×§ ×œ×§×•×—×•×ª ×™×©× ×™× (clients)
            const clientsSnapshot = await db.collection('clients').get();
            results.innerHTML += `<h3>ğŸ“ Clients Collection: ${clientsSnapshot.size} documents</h3>`;
            
            if (clientsSnapshot.size > 0) {
                results.innerHTML += '<h4>×“×•×’××ª ×œ×§×•×—×•×ª:</h4><ul>';
                clientsSnapshot.docs.slice(0, 5).forEach(doc => {
                    const data = doc.data();
                    results.innerHTML += `<li><strong>${doc.id}</strong>: ${data.fullName || data.clientName || '×©× ×œ× ×™×“×•×¢'}</li>`;
                });
                results.innerHTML += '</ul>';
            }
            
            // 2. ×‘×“×•×§ ×ª×™×§×™× ×—×“×©×™× (cases)
            const casesSnapshot = await db.collection('cases').get();
            results.innerHTML += `<h3>ğŸ“ Cases Collection: ${casesSnapshot.size} documents</h3>`;
            
            if (casesSnapshot.size > 0) {
                results.innerHTML += '<h4>×“×•×’××ª ×ª×™×§×™×:</h4><ul>';
                casesSnapshot.docs.slice(0, 5).forEach(doc => {
                    const data = doc.data();
                    results.innerHTML += `<li><strong>${doc.id}</strong>: ${data.caseTitle || '×›×•×ª×¨×ª ×œ× ×™×“×•×¢×”'} - ×œ×§×•×—: ${data.clientName || '×œ× ×™×“×•×¢'}</li>`;
                });
                results.innerHTML += '</ul>';
            }
            
            // 3. ×‘×“×•×§ ××©×™××•×ª ×ª×§×¦×•×‘
            const tasksSnapshot = await db.collection('budget_tasks').get();
            results.innerHTML += `<h3>ğŸ“ Budget Tasks: ${tasksSnapshot.size} documents</h3>`;
            
            if (tasksSnapshot.size > 0) {
                results.innerHTML += '<h4>×“×•×’××ª ××©×™××•×ª:</h4><ul>';
                tasksSnapshot.docs.slice(0, 5).forEach(doc => {
                    const data = doc.data();
                    results.innerHTML += `<li><strong>${data.description}</strong> - ×œ×§×•×—: ${data.clientName} (ID: ${data.clientId || 'N/A'}, Case ID: ${data.caseId || 'N/A'})</li>`;
                });
                results.innerHTML += '</ul>';
            }
            
            // 4. ×‘×“×•×§ ×©×¢×ª×•×Ÿ
            const timesheetSnapshot = await db.collection('timesheet_entries').get();
            results.innerHTML += `<h3>ğŸ“ Timesheet Entries: ${timesheetSnapshot.size} documents</h3>`;
            
            if (timesheetSnapshot.size > 0) {
                results.innerHTML += '<h4>×“×•×’××ª ×¨×©×•××•×ª ×©×¢×ª×•×Ÿ:</h4><ul>';
                timesheetSnapshot.docs.slice(0, 5).forEach(doc => {
                    const data = doc.data();
                    results.innerHTML += `<li><strong>${data.action}</strong> - ×œ×§×•×—: ${data.clientName} (${data.minutes} ×“×§×•×ª)</li>`;
                });
                results.innerHTML += '</ul>';
            }
            
            // 5. ×¡×™×›×•× - ×”×× ×™×© ××™×’×¨×¦×™×”?
            results.innerHTML += '<hr><h2>ğŸ“Š ×¡×™×›×•× ××¨×›×™×˜×§×˜×•×¨×”:</h2>';
            results.innerHTML += `<p><strong>××¨×›×™×˜×§×˜×•×¨×” ×™×©× ×” (clients):</strong> ${clientsSnapshot.size} ×¨×©×•××•×ª</p>`;
            results.innerHTML += `<p><strong>××¨×›×™×˜×§×˜×•×¨×” ×—×“×©×” (cases):</strong> ${casesSnapshot.size} ×¨×©×•××•×ª</p>`;
            
            if (clientsSnapshot.size > 0 && casesSnapshot.size === 0) {
                results.innerHTML += '<p style="color: red;">âš ï¸ <strong>×”×‘×¢×™×”:</strong> ×™×© ×¨×§ clients ×™×©× ×™×, ××™×Ÿ cases ×—×“×©×™×. ×¦×¨×™×š ××™×’×¨×¦×™×”!</p>';
            } else if (clientsSnapshot.size > 0 && casesSnapshot.size > 0) {
                results.innerHTML += '<p style="color: orange;">âš ï¸ <strong>××¦×‘ ×‘×™× ×™×™×:</strong> ×™×© ×’× clients ×•×’× cases. ×™×™×ª×›×Ÿ ×©×”××™×’×¨×¦×™×” ×œ× ×”×•×©×œ××”.</p>';
            } else if (casesSnapshot.size > 0) {
                results.innerHTML += '<p style="color: green;">âœ… <strong>××¨×›×™×˜×§×˜×•×¨×” ×—×“×©×”:</strong> ×”××¢×¨×›×ª ×¢×•×‘×“×ª ×¢× cases ×‘×œ×‘×“.</p>';
            }
        }
        
        checkData().catch(err => {
            results.innerHTML += `<p style="color: red;">âŒ ×©×’×™××”: ${err.message}</p>`;
            console.error(err);
        });
    </script>
</body>
</html>
