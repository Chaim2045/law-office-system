/**
 * בדיקת timestamps של רשומות timesheet
 */

const admin = require('firebase-admin');
const serviceAccount = require('./firebase-admin-key.json');

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount)
});

const db = admin.firestore();

async function checkTimestamps() {
  try {
    const snapshot = await db.collection('timesheet_entries')
      .orderBy('createdAt', 'desc')
      .limit(10)
      .get();

    console.log('\n═══════════════════════════════════════════════════');
    console.log('⏰ TIMESHEET ENTRIES - TIMESTAMPS');
    console.log('═══════════════════════════════════════════════════\n');

    snapshot.forEach((doc, idx) => {
      const data = doc.data();
      const createdAt = data.createdAt?.toDate?.() || data.createdAt;

      console.log(`[${idx + 1}] ${doc.id}`);
      console.log(`   Client: ${data.clientName}`);
      console.log(`   Service ID: ${data.serviceId}`);
      console.log(`   Minutes: ${data.minutes}`);
      console.log(`   Created At: ${createdAt}`);
      console.log(`   Auto Generated: ${data.autoGenerated || false}`);
      console.log('');
    });

    console.log('═══════════════════════════════════════════════════\n');

  } catch (error) {
    console.error('❌ Error:', error);
  } finally {
    process.exit(0);
  }
}

checkTimestamps();
