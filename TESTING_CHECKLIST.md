# 📋 רשימת בדיקות לפני הגשה ללקוח
**מערכת ניהול משרד עורכי דין - Law Office System**

> ⚠️ **חשוב מאוד!** עבור על כל הסעיפים ברשימה זו לפני מסירת המערכת ללקוח.
> סמן ✅ ליד כל בדיקה שעברה בהצלחה.

---

## 🎯 סדר ביצוע הבדיקות

### שלב 1: הכנה
1. [ ] פתח את `test-system.html` בדפדפן
2. [ ] הרץ את כל הבדיקות האוטומטיות (לחץ "הרץ את כל הבדיקות")
3. [ ] ודא שכל הבדיקות **ירוקות** (✅)
4. [ ] אם יש בדיקות אדומות (❌) - **אל תעביר ללקוח!**

### שלב 2: בדיקות ידניות מקיפות

---

## 📊 קטגוריה 1: כניסה למערכת

### ✅ בדיקה 1.1: כניסה עם משתמש קיים
**מטרה:** לוודא שכניסה למערכת עובדת

**צעדים:**
1. [ ] פתח את: `https://gh-law-office-system.netlify.app/?emp=חיים`
2. [ ] ודא שהמערכת נטענה ללא שגיאות
3. [ ] ודא שאתה רואה את השם "חיים" בכותרת
4. [ ] פתח Console (F12) - ודא שאין שגיאות אדומות
5. [ ] בדוק שהתאריך העברי מוצג נכון

**תוצאה מצופה:**
- המערכת נטענת תוך 3 שניות
- אין שגיאות ב-Console
- התאריך העברי נכון
- שם המשתמש מופיע בכותרת

---

### ✅ בדיקה 1.2: כניסה עם משתמש אחר
**מטרה:** לוודא שהמערכת עובדת עם כל המשתמשים

**צעדים:**
1. [ ] כנס עם `?emp=יוסף`
2. [ ] ודא שהנתונים שונים מאלו של "חיים"
3. [ ] ודא ששם המשתמש השתנה בכותרת

**תוצאה מצופה:**
- כל משתמש רואה את הנתונים שלו בלבד

---

## 👥 קטגוריה 2: לקוחות (Clients)

### ✅ בדיקה 2.1: צפייה ברשימת לקוחות
**מטרה:** לוודא שרשימת הלקוחות נטענת נכון

**צעדים:**
1. [ ] לחץ על הכפתור "צפה ברשימת לקוחות"
2. [ ] ודא שהטבלה מוצגת עם כל הלקוחות
3. [ ] בדוק שיש עמודות: שם, שעות כולל, שעות בשימוש, שעות נותרות, סטטוס
4. [ ] ודא שהחישוב נכון: `שעות נותרות = שעות כולל - שעות בשימוש`

**תוצאה מצופה:**
- כל הלקוחות מוצגים
- החישובים נכונים (בדוק ידנית 2-3 לקוחות)
- הסטטוס מעודכן (ירוק/אדום)

---

### ✅ בדיקה 2.2: חיפוש לקוח
**מטרה:** לוודא שחיפוש עובד

**צעדים:**
1. [ ] בתיבת החיפוש, הקלד חלק משם לקוח
2. [ ] ודא שהטבלה מסתננת בזמן אמת
3. [ ] נקה את תיבת החיפוש
4. [ ] ודא שכל הלקוחות חזרו

**תוצאה מצופה:**
- חיפוש עובד בזמן אמת
- אין lag או עיכובים
- ניקוי מחזיר את כל הלקוחות

---

### ✅ בדיקה 2.3: יצירת לקוח חדש
**מטרה:** **הבדיקה החשובה ביותר** - שמירת נתונים חדשים

**צעדים:**
1. [ ] לחץ "➕ לקוח חדש"
2. [ ] מלא את הפרטים:
   - שם: "לקוח בדיקה - יש למחוק"
   - שעות כולל: 100
3. [ ] לחץ "שמור"
4. [ ] ודא שהודעת הצלחה מופיעה
5. [ ] **רענן את הדף (F5)**
6. [ ] חפש את הלקוח החדש - ודא שהוא קיים!
7. [ ] פתח את Firebase Console: https://console.firebase.google.com/project/law-office-system-e4801/firestore
8. [ ] עבור ל-Collection `clients`
9. [ ] ודא שהלקוח החדש נמצא שם
10. [ ] מחק את הלקוח (זו רק בדיקה)

**תוצאה מצופה:**
- ✅ הלקוח נשמר ב-Firebase
- ✅ הלקוח מופיע אחרי רענון הדף
- ✅ כל הנתונים נכונים (שם, שעות)
- ✅ המחיקה עובדת

**❌ אם נכשל:**
- **אל תעביר ללקוח!**
- בדוק את Firebase Console לשגיאות
- בדוק את Console בדפדפן

---

### ✅ בדיקה 2.4: עריכת לקוח קיים
**מטרה:** לוודא שעדכון נתונים עובד

**צעדים:**
1. [ ] בחר לקוח מהרשימה
2. [ ] לחץ על כפתור העריכה (עיפרון)
3. [ ] שנה את השעות הכוללות (למשל, תוסיף 10 שעות)
4. [ ] לחץ "שמור"
5. [ ] ודא שהודעת הצלחה מופיעה
6. [ ] **רענן את הדף**
7. [ ] ודא שהשינוי נשמר

**תוצאה מצופה:**
- עדכון עובד ונשמר
- השעות הנותרות התעדכנו אוטומטית

---

## ⏰ קטגוריה 3: שעתון (Timesheet)

### ✅ בדיקה 3.1: הוספת רשומת שעתון
**מטרה:** **קריטי!** שמירת שעות לקוח

**צעדים:**
1. [ ] לחץ על טאב "שעתון"
2. [ ] לחץ "➕ רשומה חדשה"
3. [ ] בחר לקוח מהרשימה
4. [ ] הזן תאריך (למשל, היום)
5. [ ] הזן דקות: 60 (שעה אחת)
6. [ ] הזן תיאור: "בדיקה - למחוק"
7. [ ] לחץ "שמור"
8. [ ] ודא שהודעת הצלחה מופיעה
9. [ ] **בדוק ברשימת הלקוחות:**
   - [ ] השעות בשימוש עלו ב-1 שעה
   - [ ] השעות הנותרות ירדו ב-1 שעה
10. [ ] **רענן את הדף**
11. [ ] ודא שהרשומה נמצאת בשעתון
12. [ ] ודא ששעות הלקוח עדיין מעודכנות
13. [ ] מחק את הרשומה

**תוצאה מצופה:**
- ✅ הרשומה נשמרת ב-Firebase
- ✅ שעות הלקוח מתעדכנות אוטומטית
- ✅ החישוב נכון (שעות נותרות = כולל - בשימוש)
- ✅ הכל נשאר גם אחרי רענון הדף

**❌ אם נכשל:**
- זו בעיה **קריטית**!
- אל תעביר ללקוח לפני שזה תקין!

---

### ✅ בדיקה 3.2: מחיקת רשומת שעתון
**מטרה:** לוודא שמחיקה מחזירה שעות ללקוח

**צעדים:**
1. [ ] צור רשומת שעתון (60 דקות)
2. [ ] רשום את שעות הלקוח לפני מחיקה
3. [ ] מחק את הרשומה
4. [ ] ודא ששעות הלקוח חזרו למצב הקודם
5. [ ] **רענן את הדף**
6. [ ] ודא שהשעות נכונות גם אחרי רענון

**תוצאה מצופה:**
- מחיקה מחזירה את השעות ללקוח
- הכל עדיין נכון אחרי רענון

---

### ✅ בדיקה 3.3: עריכת רשומת שעתון
**מטרה:** לוודא שעדכון שעות עובד נכון

**צעדים:**
1. [ ] בחר רשומה קיימת
2. [ ] לחץ על כפתור העריכה
3. [ ] שנה דקות מ-60 ל-120
4. [ ] שמור
5. [ ] בדוק ששעות הלקוח התעדכנו (עלו ב-60 דקות)
6. [ ] רענן דף
7. [ ] ודא שהכל נכון

**תוצאה מצופה:**
- עדכון עובד נכון
- שעות הלקוח מתעדכנות בהתאם

---

## 📝 קטגוריה 4: משימות תקצוב (Budget Tasks)

### ✅ בדיקה 4.1: יצירת משימה חדשה
**מטרה:** לוודא שמשימות נשמרות

**צעדים:**
1. [ ] לחץ על טאב "משימות תקצוב"
2. [ ] לחץ "➕ משימה חדשה"
3. [ ] מלא:
   - לקוח: בחר מהרשימה
   - תיאור: "משימת בדיקה - למחוק"
   - תאריך יעד: בעוד שבוע
   - שעות משוערות: 5
4. [ ] שמור
5. [ ] ודא שהמשימה מופיעה ברשימה
6. [ ] **רענן דף**
7. [ ] ודא שהמשימה עדיין קיימת
8. [ ] מחק את המשימה

**תוצאה מצופה:**
- משימה נשמרת ונשארת אחרי רענון
- כל הפרטים נכונים

---

### ✅ בדיקה 4.2: השלמת משימה
**מטרה:** לוודא שסימון "הושלם" עובד

**צעדים:**
1. [ ] בחר משימה פעילה
2. [ ] לחץ "✓ סמן כהושלם"
3. [ ] ודא שהמשימה עברה לרשימת המשימות המושלמות
4. [ ] ודא שהסטטוס השתנה
5. [ ] רענן דף
6. [ ] ודא שהמשימה עדיין מסומנת כהושלמה

**תוצאה מצופה:**
- משימה עוברת למושלמות
- הסטטוס נשמר גם אחרי רענון

---

## 📊 קטגוריה 5: דוחות וסטטיסטיקות

### ✅ בדיקה 5.1: הצגת דוחות
**מטרה:** לוודא שדוחות מדויקים

**צעדים:**
1. [ ] לחץ על טאב "דוחות וסטטיסטיקות"
2. [ ] בדוק את הסיכומים בראש הדף:
   - [ ] סה"כ לקוחות פעילים
   - [ ] סה"כ שעות בשימוש
   - [ ] סה"כ שעות נותרות
3. [ ] השווה למספרים בטבלת הלקוחות - ודא שתואם
4. [ ] בדוק גרפים (אם יש)

**תוצאה מצופה:**
- כל המספרים מדויקים
- אין פערים בין הדוח לנתונים בפועל

---

## 🔍 קטגוריה 6: בדיקות ביצועים

### ✅ בדיקה 6.1: מהירות טעינה
**מטרה:** לוודא שהמערכת מהירה

**צעדים:**
1. [ ] רענן את הדף (F5)
2. [ ] ספור כמה שניות לוקח עד שהכל נטען
3. [ ] ודא שזה לא יותר מ-**5 שניות**

**תוצאה מצופה:**
- טעינה מהירה (עד 5 שניות)
- אין "תקיעות" או lag

---

### ✅ בדיקה 6.2: Console נקי
**מטרה:** לוודא שאין שגיאות במערכת

**צעדים:**
1. [ ] פתח Console (F12)
2. [ ] רענן את הדף
3. [ ] ודא שאין שגיאות אדומות
4. [ ] אזהרות צהובות - מותר (לא קריטי)

**תוצאה מצופה:**
- אין שגיאות אדומות ב-Console
- המערכת פועלת ללא בעיות

---

## 🔐 קטגוריה 7: אבטחה ונתונים

### ✅ בדיקה 7.1: הרשאות Firebase
**מטרה:** לוודא שרק משתמשים מורשים יכולים לגשת

**צעדים:**
1. [ ] פתח Firebase Console
2. [ ] עבור ל-Firestore → Rules
3. [ ] ודא שההרשאות מוגדרות נכון (לא `allow read, write: if true`)

**תוצאה מצופה:**
- יש הגבלות גישה
- לא כל אחד יכול לקרוא/לכתוב

---

### ✅ בדיקה 7.2: גיבוי נתונים
**מטרה:** לוודא שיש גיבוי במקרה בעיה

**צעדים:**
1. [ ] Firebase Console → Firestore
2. [ ] ייצא את כל הנתונים (Export)
3. [ ] שמור בקובץ גיבוי

**תוצאה מצופה:**
- יש גיבוי של כל הנתונים
- במקרה בעיה - אפשר לשחזר

---

## ✅ סיכום והחלטה סופית

### תוצאות כלליות:
- [ ] **כל הבדיקות האוטומטיות עברו (ירוקות)**
- [ ] **כל הבדיקות הידניות עברו**
- [ ] **אין שגיאות ב-Console**
- [ ] **נתונים נשמרים נכון ב-Firebase**
- [ ] **חישובי שעות נכונים ומדויקים**

### ✅ החלטה: המערכת מוכנה להגשה!
אם כל הסעיפים למעלה סומנו בוי - המערכת בטוחה ויציבה.

### ❌ יש בעיות - אל תעביר ללקוח!
אם יש סעיפים שלא עברו - **תקן אותם לפני ההגשה!**

---

## 📞 במקרה בעיה

### שגיאה בשמירת נתונים
1. בדוק Firebase Console לשגיאות
2. בדוק Console בדפדפן (F12)
3. ודא שהחיבור לשרת תקין

### חישובי שעות לא נכונים
1. השתמש בפונקציית debug: `window.debugClientHoursMismatch("CLIENT_ID")`
2. תקן באמצעות: `window.fixClientHoursMismatch("CLIENT_ID")`

### שגיאות ב-Functions
1. בדוק Logs: `firebase functions:log`
2. ודא שכל ה-Functions פרוסים נכון

---

## 📅 תאריך בדיקה:
**תאריך:** _________________

**בודק:** _________________

**הערות:** _________________

---

**🎯 סיכום: המערכת בטוחה רק אם עברה את כל הבדיקות!**
