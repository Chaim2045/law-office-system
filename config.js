/* =============================================================================
   קובץ קונפיגורציה מרכזי - מערכת ניהול משרד עו"ד
   גרסה: 2025 - מרוכז ונקי
   ============================================================================= */

const הגדרותמערכת = {
  // === כתובות שרת ותקשורת ===
  כתובתסקריפט:
    "https://script.google.com/macros/s/AKfycbxxpp8A3dLayMMZocATKGzlG9ARtl3xfAXY6P6Y8b2UoNBlTdpQlr_Tz5pzAE38vZU/exec",

  // === נתוני עובדים ===
  עובדים: {
    חיים: { password: "2025", name: "חיים" },
    גיא: { password: "2025", name: "גיא" },
    מרווה: { password: "2025", name: "מרווה" },
    אלומה: { password: "2025", name: "אלומה" },
    אורי: { password: "2025", name: "אורי" },
    ראיד: { password: "2025", name: "ראיד" },
    שחר: { password: "2025", name: "שחר" },
    מירי: { password: "2025", name: "מירי" },
    רועי: { password: "2025", name: "רועי" },
    עוזי: { password: "2025", name: "עוזי" },
  },

  // === הגדרות מטמון (Cache) ===
  זמניתוקףמטמון: {
    לקוחות: 5 * 60 * 1000, // 5 דקות
    משימותתקצוב: 2 * 60 * 1000, // 2 דקות
    רשומותשעתון: 1 * 60 * 1000, // 1 דקה
    כללי: 60 * 1000, // 1 דקה (ברירת מחדל)
  },

  // === הגדרות תקשורת ושגיאות ===
  הגדרותתקשורת: {
    מקסימוםניסיונות: 3,
    זמןקצובבקשה: 25000, // 25 שניות
    השהייהביןניסיונות: 1000, // 1 שניה
    מקסימוםזמןנעילה: 10000, // 10 שניות לנעילה
    השהייהבנעילה: 500, // 0.5 שניה
  },

  // === הגדרות עמוד וטעינה ===
  הגדרותטעינה: {
    גודלעמוד: 20, // פריטים בעמוד
    משךאנימציה: 400, // אנימציות (מילישניות)
    זמןהצגההודעה: 5000, // 5 שניות להודעות הצלחה
    זמןהצגתשגיאה: 3000, // 3 שניות להודעות שגיאה
  },

  // === שמות גליונות וטאבים (לGoogle Apps Script) ===
  שמותגליונות: {
    מאסטרלקוחות: "מאסטר_לקוחות",
    מאסטרעובדים: "מאסטר_עובדים",
    מאסטרעדכונים: "מאסטר_עדכונים",
    מאסטרכניסות: "מאסטר_כניסות",
    תיקייתלקוחות: "לקוחות_משרד",
    תיקייתעובדים: "עובדים_משרד",
    טאבשעתון: "שעתון",
    טאבמשימות: "משימות_מאסטר",
    טאבהיסטוריה: "זמנים_היסטוריה",
    טאבשינויים: "עדכונים_משימות",
  },

  // === הגדרות חישוב אוטומטי ===
  הגדרותחישוב: {
    שורתנתוניםראשונה: 5,
    עמודתתאריך: 1,
    עמודתתיאור: 2,
    עמודתעורךדין: 3,
    עמודתדקות: 4,
    עמודתמצטבר: 5,
    עמודתנותר: 6,
    עמודתשעותנותרות: 7,
    עמודתהערות: 8,
  },

  // === צבעי מערכת ===
  צבעים: {
    עיקרי: "#1e40af",
    הצלחה: "#10b981",
    אזהרה: "#f59e0b",
    סכנה: "#ef4444",
    בהיר: "#f8fafc",
    סגול: "#6366f1",
    בונוס: "#fbbf24",
    אפור: {
      50: "#f9fafb",
      100: "#f3f4f6",
      200: "#e5e7eb",
      300: "#d1d5db",
      400: "#9ca3af",
      500: "#6b7280",
      600: "#4b5563",
      700: "#374151",
      800: "#1f2937",
      900: "#111827",
    },
  },

  // === הגדרות שגיאות וגיבוי ===
  הגדרותגיבוי: {
    מקסימוםפעולותבגיבוי: 50,
    מקסימוםניסיונותשחזור: 5,
    השהייהביןשחזורים: 300,
  },

  // === פורמטים ותבניות ===
  פורמטים: {
    תאריךעברית: "he-IL",
    פורמטתאריך: {
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
    },
  },

  // === מצבי מערכת ===
  מצביםמערכת: {
    מחובר: "connected",
    מנותק: "offline",
    לאידוע: "unknown",
    תקין: "healthy",
    פגום: "degraded",
  },

  // === הגדרות ממשק משתמש ===
  הגדרותממשק: {
    רוחבסרגלצד: 150,
    גובהכפתור: 40,
    גובהשדה: 36,
    מטרהמגע: 36,
  },

  // === פעולות מותרות במערכת ===
  פעולותמערכת: {
    יצירתלקוח: "createClientComplete",
    שמירתמשימהתקצוב: "saveBudgetTaskToSheet",
    שמירתשעתון: "saveTimesheetAndUpdateClient",
    עדכונלקוח: "updateClient",
    מחיקתלקוח: "deleteClient",
    קבלתלקוחות: "getClients",
    קבלתמשימות: "getFilteredBudgetTasks",
    קבלתשעתון: "getTimesheetEntries",
  },
};

// Export עבור מודולים אחרים
if (typeof module !== "undefined" && module.exports) {
  module.exports = הגדרותמערכת;
} else if (typeof window !== "undefined") {
  window.הגדרותמערכת = הגדרותמערכת;
  // Backward compatibility
  window.CONFIG = הגדרותמערכת;
}

// === פונקציות עזר למניעת שגיאות ===
window.קבלהגדרה = function (נתיב) {
  try {
    const חלקים = נתיב.split(".");
    let תוצאה = הגדרותמערכת;

    for (const חלק of חלקים) {
      if (תוצאה && typeof תוצאה === "object" && חלק in תוצאה) {
        תוצאה = תוצאה[חלק];
      } else {
        console.warn(`⚠️ לא נמצאה הגדרה: ${נתיב}`);
        return null;
      }
    }

    return תוצאה;
  } catch (error) {
    console.error(`❌ שגיאה בקבלת הגדרה ${נתיב}:`, error);
    return null;
  }
};

console.log("✅ קובץ הגדרות מערכת נטען בהצלחה");
